{
  "hash": "eebd2c902e5c15cb3d22ef9459a89559",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Speak your plot into existence by writing your own ggplot2 extension\"\nauthor: \"Isabella Velásquez\"\ndate: 2024-11-15\neditor: source\ndescription: \"100 bushes of corn are distributed to 100 people such that every man receives 3 bushels, every woman 2 bushels, and every child 1/2 a bushel. How many men, women, and children are there? (Solved with R).\"\nimage: ggextenders-hex.png\nimage-alt: \"ggextenders hex showing the image of a cat stretching\"\npage-layout: article\nformat:\n  closeread-html:\n    cr-style:\n      narrative-background-color-overlay: transparent\n      narrative-background-color-sidebar: transparent\n      section-background-color: transparent\n      narrative-text-color-overlay: black\n---\n\nIf you use ggplot2, you are probably used to creating plots with `geom_line()` and `geom_point()`. You may also have ventured into to the broader ggplot2 ecosystem to use geoms like `geom_density_ridges()` from [ggridges](https://wilkelab.org/ggridges/) or `geom_signif()` from [ggsignif](https://const-ae.github.io/ggsignif/). But have you ever wondered _how_ these extensions were created? Where did the authors figure out how to create a new geom? And---if the plot of your dreams doesn't exist---how would you make your own?\n\nEnter the exciting world of creating your own ggplot2 extensions.\n\nI had the pleasure of meeting [Gina Reynolds](https://github.com/EvaMaeRey) when I first began my job at Posit and she was contributing a blog post on [flipbookr](https://evamaerey.github.io/ggplot_flipbook/ggplot_flipbook_xaringan.html#1). Since then, we've kept in touch through the [ggextenders](https://ggplot2-extenders.github.io/ggplot-extension-club/) extension club. Every few months, the club meets virtually to hear from a ggextender. The speaker can talk about a custom geom they've created for the community or more general R visualization topics. In these meetings I've learned about cool packages like [ggstats](https://larmarange.github.io/ggstats/). Each presentation is insightful and interesting---[join us sometime](https://docs.google.com/forms/d/e/1FAIpQLSe3M1KwUPrmTfEGuuQp0fZ0J7dZkk_82gb310JCvdouMTa_7Q/viewform)!\n\nHowever, I was never a \"ggextender\" myself and more a great appreciator of ggextensions. That is, until recently!\n\nGina held a focus group that worked through the [Easy geom recipes](https://evamaerey.github.io/easy-geom-recipes/), a series of tutorials on creating ggplot2 extensions. Following \"recipes\", you methodically create three extensions. Each time, certain key knowledge points are reinforced and new variations are introduced.\n\nSo, let's say we want to create a new `geom_*()` that adds a point on the median of the x-axis and y-axis variables of a plot. We will call it `geom_medians()`. Let's follow the recipe:\n\n:::{.cr-section}\n\n## Step 0. Get the job done with 'base' ggplot2.\n\nFirst, clarify what needs to happen without getting into the extension architecture. Load the tidyverse package and the palmerpenguins package. [@cr-step01]{highlight=\"1,2\"}\n\nRemove the missing values from the `penguins` dataset. [@cr-step01]{highlight=\"4\"}\n\nCalculate the median of the x variable (`bill_length_mm`) and y variable (`bill_depth_mm`) as you would normally. [@cr-step01]{highlight=\"6,7,8,9\"}\n\n:::{#cr-step01 .scale-to-fill}\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(palmerpenguins)\n\npenguins_clean <- remove_missing(penguins)\n\n# Compute\npenguins_medians <- penguins_clean |> \n  summarize(bill_length_mm_median = median(bill_length_mm),\n            bill_depth_mm_median = median(bill_depth_mm))\n```\n:::\n:::\n\nNow, use base ggplot2 to get the job done.[@cr-step02]\n\nThis requires specifying `bill_depth_mm_median` and `bill_length_mm_median`, which we just created, within `aes()` in `geom_point()`.[@cr-step02]{highlight=\"7,8\"}\n\n:::{#cr-step02 .scale-to-fill}\n::: {.cell}\n\n```{.r .cell-code}\n# Plot\npenguins_clean |> \n  ggplot() + \n  aes(x = bill_depth_mm, y = bill_length_mm) + \n  geom_point() + \n  geom_point(data = penguins_medians,\n             aes(x = bill_depth_mm_median,\n                 y = bill_length_mm_median),\n             size = 8, color = \"red\") + \n  labs(title = \"Created with base ggplot2\")\n```\n:::\n:::\n\nThis is the resulting plot.[@cr-step03]\n\n:::{#cr-step03 .scale-to-fill}\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n:::\n\n## Step 1: Define Compute and test.\n\nDefine the compute that will transform your input data \"under the hood\" before rendering it.[@cr-step11]\n\n:::{#cr-step11 .scale-to-fill}\n::: {.cell}\n\n```{.r .cell-code}\n# Define compute.\ncompute_group_medians <- function(data, scales){ \n  data |> \n    summarize(x = median(x),\n              y = median(y))\n}\n```\n:::\n\n:::\n\n\n:::\n\nA fun note is that the geom recipes website uses [webR](https://docs.r-wasm.org/webr/latest/) and [Quarto Live](https://github.com/r-wasm/quarto-live) to embed interactive code chunks directly in the tutorial. It makes for an immersive experience while going through the exercises.\n\n## Resources\n\nIt's a true delight going through Gina's resources, from seeing the [adorable ggextenders hex](https://evamaerey.github.io/everyday_ggplot2_extension/community.html) to reading all the touching notes about ggplot2, comparing it to art, food, and more. It's a true testament of how a tool can inspire so many. Here are some of my favorites quotations and metaphors:\n\n* \"ggplot2 lets users 'speak their plots into existence'\"\n* \"You are a composer of ‘graphical poems’\"\n\nLearn more about Gina's work here:\n\n* [Everyday ggplot2 extension](https://evamaerey.github.io/everyday_ggplot2_extension/): education materials for potential extenders \n* [ggplot2 extension cookbook](https://evamaerey.github.io/ggplot2-extension-cookbook/): Guide that presents extension strategies in a consistent and accessible way\n* [ggplot2 extenders club website](https://ggplot2-extenders.github.io/ggplot-extension-club/): See previous talks and sign up for future webinars\n* [Easy geom recipes](https://evamaerey.github.io/easy-geom-recipes/): Try your hand at creating your first extension!\n\nMore resources on ggplot2 extensions:\n\n* [Extending your ability to extend ggplot2](https://www.youtube.com/watch?v=uj7A3i2fi54): Thomas Lin Pederson's talk from rstudio::conf(2020) on entering the world of ggplot2 extensions\n* [Writing ggplot2 extensions chapter in ggplot2: Elegant Graphics for Data Analysis (3e)](https://ggplot2-book.org/extensions.html) by Hadley Wickham, Danielle Navarro, and Thomas Lin Pedersen\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}